<!DOCTYPE html>
<html>
	<head>
		<title>Student</title>
		<link rel="stylesheet" type="text/css" href="../bower_components/bootstrap/dist/css/bootstrap.css">
	    <link rel="stylesheet" type="text/css" href="../keepfooter/example/keeplogo/keeplogo.css">
	    <link rel="stylesheet" type="text/css" href="../keepfooter/dist/keepfooter.css">
	    <link rel="stylesheet" type="text/css" href="../bower_components/components-font-awesome/css/font-awesome.css">
	    <link rel="stylesheet" type="text/css" href="../css/dataTables.bootstrap.min.css">
	    <link rel="stylesheet" type="text/css" href="../keepmenu/dist/keepmenu.css">
	    <link rel="stylesheet" type="text/css" href="../css/jquery-ui.min.css">
	    <link rel="stylesheet" type="text/css" href="../css/jquery-ui.structure.min.css">
	    <link rel="stylesheet" type="text/css" href="../css/jquery-ui.theme.min.css">
	    <script type="text/javascript" src="../bower_components/jquery/dist/jquery.js"></script>
	    <script type="text/javascript" src="../bower_components/handlebars/handlebars.js"></script>
	    <script type="text/javascript" src="../keepfooter/dist/keepfooter.js"></script>
	    <script type="text/javascript" src="../bower_components/devbridge-autocomplete/dist/jquery.autocomplete.js"></script>
	    <script type="text/javascript" src="../keepmenu/dist/keepmenu.js"></script>
		<!-- Bootstrap Core JavaScript -->
		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/jquery-ui.min.js"></script>
		<script type="text/javascript" src="../js/echarts.min.js"></script>

	</head>
	<body style="background-color: #ccc; min-height:100%">
		<input type="hidden" id="username" value="Test" />
		<nav id="keepmenu"></nav>

	    <script>
	        var mission = { title: "Mission", url: "/mission" };
	        var partners = { title: "Partners", url: "/partners" };
	        var team = { title: "Team", url: "/team" };
	        var about = { title: "About", url: "about", submenu: [mission, partners, team] }; 
	        var news = { title: "News", url: "news" };
	        var services = { title: "Services", url: "services" };
	        var contact = { title: "Contact", url: "contact" };
	        var menu = [about, news, services, contact];

	        // When logined
	        //keepmenu('KEEP', menu, 'Jane', 'loginUrl', 'logoutUrl', null, 'q', 'collection2', 'en');
	        // When not logined
	        if($('#username').val() == ''){
				keepmenu('KEEP', menu, '', 'login', 'logout', 'searchUrl');
	        }else{
	        	keepmenu('KEEP', menu, $('#username').val(), 'login', 'logout', null, 'q', 'collection2', 'en');
	        }
	        
	    </script>
		<style type="text/css">
			/*
		 * Base structure
		 */

		/* Move down content because we have a fixed navbar that is 50px tall */
		body {
		  /*padding-top: 50px;*/
		}


		/*
		 * Global add-ons
		 */

		.sub-header {
		  padding-bottom: 10px;
		  border-bottom: 1px solid #eee;
		}

		/*
		 * Top navigation
		 * Hide default border to remove 1px line.
		 */
		.navbar-fixed-top {
		  border: 0;
		}

		/*
		 * Sidebar
		 */

		/* Hide for mobile, show later */
		.sidebar {
		  display: none;
		}
		@media (min-width: 768px) {
		  .sidebar {
		    position: fixed;
		    top: 51px;
		    bottom: 0;
		    left: 0;
		    z-index: 1000;
		    display: block;
		    padding: 20px;
		    overflow-x: hidden;
		    overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
		    background-color: #f5f5f5;
		    border-right: 1px solid #eee;
		  }
		}

		/* Sidebar navigation */
		.nav-sidebar {
		  margin-right: -21px; /* 20px padding + 1px border */
		  margin-bottom: 20px;
		  margin-left: -20px;
		}
		.nav-sidebar > li > a {
		  padding-right: 20px;
		  padding-left: 20px;
		}
		.nav-sidebar > .active > a,
		.nav-sidebar > .active > a:hover,
		.nav-sidebar > .active > a:focus {
		  color: #fff;
		  background-color: #428bca;
		}


		/*
		 * Main content
		 */

		.main {
		  padding: 20px;
		}
		@media (min-width: 768px) {
		  .main {
		    padding-right: 40px;
		    padding-left: 40px;
		  }
		}
		.main .page-header {
		  margin-top: 0;
		}


		/*
		 * Placeholder dashboard ideas
		 */

		.placeholders {
		  margin-bottom: 30px;
		  text-align: center;
		}
		.placeholders h4 {
		  margin-bottom: 0;
		}
		.placeholder {
		  margin-bottom: 20px;
		}
		.placeholder img {
		  display: inline-block;
		  border-radius: 50%;
		}
		</style>

		<div class="container-fluid">
	      <div class="row">
	        <div class="col-sm-3 col-md-2 sidebar">
		        <ul class="nav nav-sidebar">
		        	<li><div class="input-group" style="margin-left: 2px; margin-right: 2px;">
				      <input type="text" class="form-control" placeholder="Search Courses">
				      <span class="input-group-btn">
				        <button class="btn btn-default" type="button">Go!</button>
				      </span>
				    </div><!-- /input-group --></li>
		        </ul>
	          <ul class="nav nav-sidebar">
	            <li><a href="#">Overview</a></li>
	          </ul>
	          <ul class="nav nav-sidebar">
	            <li><a href="">Active Course</a></li>
	            <li class="active"><a href="">- CSCI2100 <span class="sr-only">(current)</span></a></li>
            	<li><a href="">- CSCI3100</a></li>
            	<li><a href="">- CSCI3180</a></li>
            	<li><a href="">- CSCI4140</a></li>
	          </ul>
	          <ul class="nav nav-sidebar">
	            <li><a href="">Closed Course</a></li>
	          </ul>
	        </div>
	        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
	          	<h1 class="page-header">Detailed Info. About CSCI2100</h1>

				<h2 class="sub-header">Overall Percentile</h2>
				<div id="overall-percentile" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Percentile For Assignments</h2>
				<select>
					<option>Assignment 1</option>
					<option>Assignment 2</option>
					<option>Assignment 3</option>
					<option>Assignment 4</option>
				</select>
				<div id="percentile-asg" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Percentile For Quiz</h2>
				<select>
					<option>Quiz 1</option>
					<option>Quiz 2</option>
					<option>Quiz 3</option>
					<option>Quiz 4</option>
				</select>
				<div id="percentile-quiz" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Engagement of This Course</h2>
				<div id="engagement" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Score Distribution of Assignment</h2>
				<!-- <select>
					<option>Assignment 1</option>
					<option>Assignment 2</option>
					<option>Assignment 3</option>
					<option>Assignment 4</option>
				</select> -->
				<div id="score-dis-asg" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Score Distribution of Quiz</h2>
				<select>
					<option>Quiz 1</option>
					<option>Quiz 2</option>
					<option>Quiz 3</option>
					<option>Quiz 4</option>
				</select>
				<div id="score-dis-quiz" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Progress Distribution of Students (Edx only)</h2>
				<div id="progress-dis" style="width: 1000px;height:400px;"></div>

				<h2 class="sub-header">Top 3 Viewed Threads</h2>
				<table class="table table-striped">
					<thead>
						<tr><th>Ranking</th><th>Question</th><th>Course Code</th><th>Course Title</th><th>Viewed</th></tr>
					</thead>
					<tbody>
						<tr><td>1</td><td>How to write Quick Sort?</td><td>CSCI2100</td><td>Data Structure</td><td>245</td></tr>
						<tr><td>2</td><td>How to design a UML</td><td>CSCI3100</td><td>Software Engineering</td><td>145</td></tr>
						<tr><td>3</td><td>How to program in Fortran</td><td>CSCI3180</td><td>Priciple of Programming Language</td><td>97</td></tr>       
					</tbody>
				</table>

				<h2 class="sub-header">Top 3 Replied Threads</h2>
				<table id="topRepliedTable" class="table table-striped">
					<thead>
						<tr><th>Ranking</th><th>Question</th><th>Course Code</th><th>Course Title</th><th>Replied</th></tr>
					</thead>
					<tbody>
						<tr><td>1</td><td>How to write Quick Sort?</td><td>CSCI2100</td><td>Data Structure</td><td>35</td></tr>
						<tr><td>2</td><td>How to design a UML</td><td>CSCI3100</td><td>Software Engineering</td><td>21</td></tr>
						<tr><td>3</td><td>How to program in Fortran</td><td>CSCI3180</td><td>Priciple of Programming Language</td><td>17</td></tr>       
					</tbody>
				</table>
	        </div>
	      </div>
	    </div>


	<script type="text/javascript">
	function getEngagementData(){
		$.ajax({
			url: 'http://benjamin-zhou.com/ll_statistic/index.php/learninglocker/test',
			type: 'GET',
			dataType: 'json',
			success: function(data){
				if(data[0]['ok'] == 1){
					drawEngagement(data[0]['result']);
				}else{
					alert('error');
				}
			},
			error: function(){
				alert('error');
			}
		});
	}

	function drawEngagement(data){
		var base = -data.reduce(function (min, val) {
	        return Math.floor(Math.min(min, val.l));
	    }, Infinity);
        var myChart = echarts.init(document.getElementById('engagement'));
        var option = {
	        title: {
	            text: 'Student Engagement',
	            left: 'center'
	        },
	        tooltip: {
	            trigger: 'axis',
	            axisPointer: {
	                animation: false
	            },
	            formatter: function (params) {
	                return params[2].name + '<br />' + params[2].value;
	            }
	        },
	        grid: {
	            left: '3%',
	            right: '4%',
	            bottom: '3%',
	            containLabel: true
	        },
	        xAxis: {
	            type: 'category',
	            data: data.map(function (item) {
	                return item.date;
	            }),
	            axisLabel: {
	                formatter: function (value, idx) {
	                    var date = new Date(value);
	                    return idx === 0 ? value : [date.getMonth() + 1, date.getDate()].join('-');
	                }
	            },
	            splitLine: {
	                show: false
	            },
	            boundaryGap: false
	        },
	        yAxis: {
	            axisLabel: {
	                formatter: function (val) {
	                    return (val - base) * 100 + '%';
	                }
	            },
	            splitNumber: 3,
	            splitLine: {
	                show: false
	            }
	        },
	        series: [/*{
	            name: 'L',
	            type: 'line',
	            data: data.map(function (item) {
	                return item.l + base;
	            }),
	            lineStyle: {
	                normal: {
	                    opacity: 0
	                }
	            },
	            stack: 'confidence-band',
	            symbol: 'none'
	        }, {
	            name: 'U',
	            type: 'line',
	            data: data.map(function (item) {
	                return item.u - item.l;
	            }),
	            lineStyle: {
	                normal: {
	                    opacity: 0
	                }
	            },
	            areaStyle: {
	                normal: {
	                    color: '#ccc'
	                }
	            },
	            stack: 'confidence-band',
	            symbol: 'none'
	        }, */{
	            type: 'line',
	            data: data.map(function (item) {
	                return item.value + base;
	            }),
	            hoverAnimation: false,
	            symbolSize: 6,
	            itemStyle: {
	                normal: {
	                    color: '#c23531'
	                }
	            },
	            showSymbol: false
	        }]
	    };
	    myChart.setOption(option);
   //      var option = {
   //          title: {
   //              text: 'Your Activities'
   //          },
   //          tooltip: {},
   //          legend: {
   //              data:['Forum', 'Assessment', 'Lecture Material']
   //          },
   //          xAxis: {
   //              data: ["Jan 14","Jan 15","Jan 16","Jan 17","Jan 18","Jan 19","Jan 20","Jan 21","Jan 22","Jan 23","Jan 24","Jan 25","Jan 26","Jan 27"]
   //          },
   //          yAxis: [
   //          {
   //              type : 'value',
   //              name : 'Activity Level'
   //          }
			// ],
   //          series: [
   //          {
   //              name: 'Forum',
   //              type: 'line',
   //              data: [10, 5, 3, 1, 2, 5, 5, 3, 1, 2, 5, 5, 3, 1]
   //          },
   //          {
   //              name: 'Assessment',
   //              type: 'line',
   //              data: [15, 30, 40, 5, 7, 10, 15, 30, 40, 5, 7, 10, 11, 2]
   //          },
   //          {
   //              name: 'Lecture Material',
   //              type: 'line',
   //              data: [2, 6, 4, 2, 8, 3, 2, 6, 4, 2, 8, 3, 4, 2]
   //          }]
   //      };
   //      myChart.setOption(option);
	}

	function drawPercentileCourse(){
		var myChart = echarts.init(document.getElementById('overall-percentile'));
		option = {
		    tooltip : {
		        formatter: "{a} <br/>{b} : {c}%"
		    },
		    toolbox: {
		        show : true,
		        feature : {
		            mark : {show: true}
		        }
		    },
		    series : [
		        {
		            name:'Overall Percentile',
		            type:'gauge',
		            detail : {formatter:'{value}%'},
		            data:[{value: 37, name: 'Overall'}]
		        }
		    ]
		};
		myChart.setOption(option);
	}

	function drawPercentileAsg(){
		var myChart = echarts.init(document.getElementById('percentile-asg'));
		option = {
		    tooltip : {
		        formatter: "{a} <br/>{b} : {c}%"
		    },
		    toolbox: {
		        show : true,
		        feature : {
		            mark : {show: true}
		        }
		    },
		    series : [
		        {
		            name:'Assignment Percentile',
		            type:'gauge',
		            detail : {formatter:'{value}%'},
		            data:[{value: 78, name: 'Assignment Percentile'}]
		        }
		    ]
		};
		myChart.setOption(option);
	}

	function drawPercentileQuiz(){
		var myChart = echarts.init(document.getElementById('percentile-quiz'));
		option = {
		    tooltip : {
		        formatter: "{a} <br/>{b} : {c}%"
		    },
		    toolbox: {
		        show : true,
		        feature : {
		            mark : {show: true}
		        }
		    },
		    series : [
		        {
		            name:'Quiz Percentile',
		            type:'gauge',
		            detail : {formatter:'{value}%'},
		            data:[{value: 69, name: 'Quiz Percentile'}]
		        }
		    ]
		};
		myChart.setOption(option);
	}

	function drawScoreDisAsg(){
        var myChart = echarts.init(document.getElementById('score-dis-asg'));
        var option = {
            title: {
                //text: 'ECharts 入门示例'
            },
            tooltip: {},
            legend: {
                data:['Assignment 1', 'Assignment 2']
            },
            xAxis: {
                data: ["0%-20%","21%-40%","41%-60%","61%-80%","81%-100%"]
            },
            yAxis: [
            {
                type : 'value',
                name : 'Number of Students'
            }
			],
            series: [{
                name: 'Assignment 1',
                type: 'bar',
                data: [1, 30, 56, 20, 10]
            },
            {
                name: 'Assignment 2',
                type: 'bar',
                data: [5, 23, 58, 18, 8]
            }]
        };
        myChart.setOption(option);
	}

	function drawScoreDisQuiz(){
        var myChart = echarts.init(document.getElementById('score-dis-quiz'));
        var option = {
            title: {
                //text: 'ECharts 入门示例'
            },
            tooltip: {},
            legend: {
                data:['Number of Students']
            },
            xAxis: {
                data: ["0%-20%","21%-40%","41%-60%","61%-80%","81%-100%"]
            },
            yAxis: [
            {
                type : 'value',
                name : 'Number of Students'
            }
			],
            series: [{
                name: 'number of sutdents',
                type: 'bar',
                data: [4, 25, 35, 56, 18]
            }]
        };
        myChart.setOption(option);
	}

	function drawProgressDis(){
        var myChart = echarts.init(document.getElementById('progress-dis'));
        var option = {
            title: {
                //text: 'ECharts 入门示例'
            },
            tooltip: {},
            legend: {
                data:['Number of Students']
            },
            xAxis: {
                data: ["Section 1","Section 2","Section 3","Section 4","Section 5"]
            },
            yAxis: [
            {
                type : 'value',
                name : 'Number of Students'
            }
			],
            series: [{
                name: 'number of sutdents',
                type: 'bar',
                data: [4, 25, 35, 56, 18]
            }]
        };
        myChart.setOption(option);
	}

	function init(){
		getEngagementData();
		drawPercentileCourse();
		//drawEngagement();
		drawPercentileAsg();
		drawPercentileQuiz();
		drawScoreDisAsg();
		drawScoreDisQuiz();
		drawProgressDis();
		//$('#topRepliedTable').DataTable();
	}

	$(document).ready(init);
	</script>
	</body>
</html>